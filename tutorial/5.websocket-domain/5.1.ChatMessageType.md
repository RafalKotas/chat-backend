# 5.1 `ChatMessageType`

This enum represents the **type of WebSocket message** exchanged inside a chat channel. It is used by the 
`ChatController`, message handlers, and the frontend WebSocket client to understand the *purpose* of each incoming 
message.

```java
package com.chatapp.chat.chat;

public enum ChatMessageType {
    CHAT,
    JOIN,
    LEAVE
}
```

---

## ğŸ“ Overview

In any real-time messaging system, individual WebSocket frames must contain not only content (text, sender, timestamp) 
but also the *semantic meaning* of the message.

`ChatMessageType` is used to clearly indicate **what kind of event** occured:
- *Did someone send a chat message?*
- *Did someone join the room?*
- *Did someone leave the room?*

This enum ensures that both the backend and frontend interpret messages consistently.

---

## ğŸ“Œ Enum Values Explained

### 1. `CHAT`

Represents a **standard chat message** sent by a user.

Used when:
- a user sends a new text message
- the backend broadcasts this message to `/topic/chat.{chatId}`
- the frontend should render it in message list

### Typical JSON payload:

```json
{
  "chatId": "abc123",
  "sender": "Alice",
  "content": "Hello everyone!",
  "type": "CHAT"
}
```

---

### 2. `JOIN`

Represents a **"user joined the chat"** system event.

Used when:
- a new user enters a chat room
- the frontend shows a system notification like "Alice joined the chat"

Set explicitly in:
```java
chatMessage.setType(ChatMessageType.JOIN);
```

### Typical UI behavior:
- grey system bubble
- not treated as a normal chat message

---

### 3. `LEAVE`

Represents a **"user left the chat"** system event.

Used when:
- a user disconnects
- a user manually leaves the chat
- the frontend needs to remove typing indicators or show a message such as:
    
  *"Alice left the chat."*

This is optional depending on the UI/UX but is supported by the enum.

---

## ğŸ¯ Why This Enum Matters

**1. Front-end interoperability**

The UI can easily switch on `.type` to decide how to render the message.

**2. Clear server-client communication**

WebSocket messages become self-describing.

**3. Extensibility**

Future types (e.g., `TYPING`, `READ_RECEIPT`, `SYSTEM`) can be added without changing the protocol.

**4. Strong typing**

Prevents bugs caused by magic strings (`"join"`, `"chat"`, `"leave"`).

--- 

## ğŸ“¦ Where It Is Used

### Backend:

- `ChatController.sendMessage()` (`CHAT`)
- `ChatController.addUser()` (`JOIN`)
- Future events such as "leave" handlers

### Frontend:

- rendering incoming WebSocket frames
- displaying system events
- managing chat presence

---

## âœ” Summary

`ChatMessageType` is a simple but critical enum that defines **the intent of every WebSocket message** in the chat 
module.

It allows the backend and frontend to maintain a clean, extensible communication protocol and ensures that real-time 
events are processed and rendered correctly.