# UserRepository - Persistence Layer Design

This document describes the purpose and design of the `UserRepository` interface.

---

## ğŸ¯ Responsibility

The repository handles:
- persistence of `User` entities
- lookup queries for email und username
- existence checks used during registration and user validation

It contains **no business logic** - only database access.

---

## ğŸ§± Technology Choice

`UserRepository` extends:

```java
JpaRepository<User, UUID>
```

This gives us:
- standard CRUD operations
- pagination & sorting support
- automatic method-based query generation
- transactional handling

Spring Data JPA removes the need to write SQL or JPQL for simple queries.

---

## ğŸ” Query Methods

`Optional<User> findByEmail(String email)`

Used in:
- authentication
- fetching user profile by email

`Optional<User> findByUsername(String username)`

Used in:
- displaying profiles
- searching contacts
- forming chat participants

`boolean existsByEmail(String email)`

Used to enforce unique email during registration.

`boolean existsByUsername(String username)`

Used when the username field is provided.

---

## ğŸ§© Why Optional?

Returning `Optional<User>`:
- avoids null checks
- forces explicit handling of absent results
- improves API clarity

---

## ğŸ“˜ Design Notes
- All queries rely on naming conventions (`findBy...`, `existsBy...`)
- Repository layer stays thin and declarative
- Business rules (password hashing, validation, registration) will be placed in the service layer
- UUID ensures consistent identity across all layers

---

## ğŸ”® Future Enhancements
Possible additions:
- custom queries for user search
- pagination for contact lists
- specifications or Criteria API for filtering
- soft deletes / account visibility filtering